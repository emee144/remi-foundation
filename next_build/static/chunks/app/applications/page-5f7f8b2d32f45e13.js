(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{2713:(e,t,a)=>{Promise.resolve().then(a.bind(a,8895))},4652:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return i},getImageProps:function(){return o}});let s=a(943),r=a(5040),l=a(1356),n=s._(a(1124));function o(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let i=l.Image},5239:(e,t,a)=>{"use strict";a.d(t,{default:()=>r.a});var s=a(4652),r=a.n(s)},8895:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(5155),r=a(2115),l=a(5239);function n(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!1),[o,i]=(0,r.useState)("");async function c(){n(!0),i("");try{let e=localStorage.getItem("token"),a=await fetch("/api/purchases",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}),s=await a.json();if(!a.ok)throw Error(s.error||"Failed to fetch purchases");t(s.purchases.sort((e,t)=>new Date(t.purchaseDate)-new Date(e.purchaseDate)))}catch(e){i(e.message)}finally{n(!1)}}return(0,r.useEffect)(()=>{c();let e=setInterval(c,6e4);return()=>clearInterval(e)},[]),(0,s.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,s.jsx)(l.default,{src:"/remilogo.jpeg",alt:"Remi Foundation Logo",width:96,height:96,className:"mb-2 rounded-full shadow-lg"}),(0,s.jsx)("h2",{className:"text-3xl font-bold text-green-900",children:"Remi Oseni Foundation"})]}),(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Applications"}),o&&(0,s.jsx)("p",{className:"bg-red-100 text-red-700 px-4 py-2 rounded mb-4",children:o}),a?(0,s.jsx)("p",{className:"text-gray-500 text-center",children:"Loading purchase history..."}):0===e.length?(0,s.jsx)("p",{className:"text-gray-500 text-center",children:"No purchases yet."}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(e=>{var t;let a=(t=e.purchaseDate,Math.max(30-Math.floor((new Date-new Date(t))/864e5),0));return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-4 border-l-4 border-blue-500 hover:shadow-xl transition",children:[(0,s.jsxs)("p",{className:"text-gray-600 font-medium",children:["Purchase ID: ",e.id]}),(0,s.jsxs)("p",{className:"text-gray-800 font-semibold mt-1",children:["Date: ",new Date(e.purchaseDate).toLocaleString()]}),(0,s.jsxs)("p",{className:"text-green-600 font-bold mt-1",children:["Status: ",e.status||"Completed"]}),(0,s.jsx)("p",{className:"text-yellow-600 font-semibold mt-1",children:a>0?"".concat(a," day(s) left"):"Expired"})]},e.id)})})]})}}},e=>{e.O(0,[356,441,493,358],()=>e(e.s=2713)),_N_E=e.O()}]);